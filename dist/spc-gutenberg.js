!function(){"use strict";var e={};function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var r=window.wp.element,n=window.wp.data,o=window.wp.apiFetch,a=e.n(o),s=window.wp.url,i=window.wp.compose,p=window.wp.i18n;class m extends r.Component{constructor(){super(),this.state={terms:null,primaryTermId:0}}componentDidMount(){a()({path:(0,s.addQueryArgs)(`/wp/v2/${this.props.primaryTaxonomy.restBase}`,{_fields:"id,name",orderby:"count",order:"desc",per_page:-1})}).then((e=>{this.setState({terms:e})})),this.setState({primaryTermId:this.props.primaryTaxonomy.primary})}onSelectChange(e){const t={};t[`spc_primary_${this.props.primaryTaxonomy.name}`]=parseInt(e.target.value,10),this.props.updateSPC(t),this.setState({primaryTermId:e.target.value})}render(){const{primaryTaxonomy:e,selectedTermsIds:t}=this.props,{title:n}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("h4",null,(0,p.sprintf)(
/* translators: %s expands to taxonomy title. */
(0,p.__)("Primary %s","simple-primary-category"),n)),(0,r.createElement)("select",{onChange:this.onSelectChange.bind(this)},(0,r.createElement)("option",{value:"-1"},(0,p.sprintf)(
/* translators: %s expands to taxonomy title. */
(0,p.__)("— Select Primary %s —","simple-primary-category"),n)),this.state.terms&&this.state.terms.map((e=>{if(t.includes(e.id))return this.state.primaryTermId===e.id?(0,r.createElement)("option",{value:e.id,selected:!0},e.name):(0,r.createElement)("option",{value:e.id},e.name)}))))}}var c=(0,i.compose)([(0,n.withSelect)(((e,t)=>{let{primaryTaxonomy:r}=t;const{getEditedPostAttribute:n}=e("core/editor");return{selectedTermsIds:n(r.restBase),meta:n("meta")}})),(0,n.withDispatch)((e=>{const{editPost:t}=e("core/editor");return{updateSPC(e){t({meta:e})}}}))])(m);class l extends r.Component{constructor(){super(),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){const{slug:e,TaxonomyComponent:t}=this.props,n=spcData.taxonomies;return this.state.hasError?(0,r.createElement)(t,this.props):n.hasOwnProperty(e)?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(t,this.props),(0,r.createElement)(c,{primaryTaxonomy:n[e]})):(0,r.createElement)(t,this.props)}}var d=l;function u(e){return n=>(0,r.createElement)(d,t({TaxonomyComponent:e},n))}"undefined"!=typeof wp&&void 0!==wp.blocks&&wp.hooks.addFilter("editor.PostTaxonomyType","simple-primary-category",u)}();